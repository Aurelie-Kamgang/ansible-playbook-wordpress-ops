---
# ============================================================
# group_vars/wordpress_servers.yml
# Variables communes à tous les serveurs WordPress
# ============================================================
# Convention de nommage :
#   vault_*  → valeur brute chiffrée dans vault.yml
#   Les variables du rôle (db_user, db_password…) récupèrent
#   leur valeur depuis le vault via les alias ci-dessous.
# ============================================================

# ── Docker ──────────────────────────────────────────────────
wordpress_container: "eazy-givewp-wordpress-1"
mysql_container: "eazy-givewp-db-1"
wordpress_root: "/var/www/html"

# ── Base de données ─────────────────────────────────────────
# Ces variables correspondent aux MYSQL_* du .env Docker
db_name: "{{ vault_mysql_database }}"
db_user: "{{ vault_mysql_user }}"
db_password: "{{ vault_mysql_password }}"
db_root_password: "{{ vault_mysql_root_password }}"

# ── Backup local ────────────────────────────────────────────
backup_base_dir: "/opt/backups/wordpress"
backup_retention_days: 7

# ── Amazon S3 ───────────────────────────────────────────────
s3_enabled: true
s3_bucket: "mon-bucket-wordpress-backup"
s3_region: "us-east-1"
s3_prefix: "wordpress"
aws_access_key: "{{ vault_aws_access_key | default('') }}"
aws_secret_key: "{{ vault_aws_secret_key | default('') }}"

# ── Mise à jour ciblée des plugins ──────────────────────────
# Liste des plugins à mettre à jour avec leur version cible
# Adapter selon vos besoins avant chaque run update_plugins
plugins_to_update:
  - name: woocommerce
    version: "8.5.2"
  - name: yoast-seo
    version: "22.1"
  - name: contact-form-7
    version: "5.9.3"
